<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>è·¯ç”±çš„åµŒå¥—</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen"/>
    <style type="text/css">
        .active{
            color: red;
            font-size: 20px
        }
    </style>
</head>
<body>
    <!-- è·¯ç”± -->
    <div id="container">
        <!-- ä½¿ç”¨router-link å®šä¹‰å¯¼èˆªï¼Œtoå±æ€§æŒ‡å®šè¿æ¥url -->
        <div id="routerLink">
            <router-link to="/main">ä¸»é¡µ</router-link>
            <router-link to="/user">ç”¨æˆ·</router-link>
        </div>
        <!-- router-viewç»„ä»¶ç”¨æ¥å®šä¹‰è·¯ç”±å†…å®¹ -->
        <div id="content">
            <router-view></router-view>
        </div>
        <!-- routerå®ä¾‹çš„æ–¹æ³• -->
        <hr>
        <button @click="addRouter()">æ·»åŠ è·¯ç”±</button>
        <button @click="changeRouter()">æ›¿æ¢è·¯ç”±</button>
    </div>
    <template id="user">
        <div>
            <h3>ç”¨æˆ·ä¿¡æ¯</h3>
            <ul>
                <!-- åµŒå¥—çš„è·¯ç”±ï¼Œç”±äºæ˜¯/userè·¯ç”±ä¸‹çš„ï¼Œæ‰€ä»¥å‰é¢è¦åŠ ä¸Š'/user'ï¼Œè¿™æ ·æ‰èƒ½ä½“ç°å‡ºçˆ¶å­å…³ç³»å˜›ï¼ğŸ˜„ -->
                <!-- ç¬¬ä¸€ç§ä¼ å‚æ–¹å¼ -->
                <li><router-link to="/user/login?name=zahnsgan&id=123">ç”¨æˆ·ç™»é™†</router-link></li>
                <!-- ç¬¬äºŒç§ä¼ å‚æ–¹å¼ï¼š è°çŸ¥é“è¿™æ¥¼é‡Œçš„aliceå’Œ123åˆ†åˆ«ä»£è¡¨ä»€ä¹ˆå‘¢ï¼Œä¸‹é¢æœ‰è¯¦ç»†çš„è§£ç­”-->
                <li><router-link to="/user/regist/alice/123">ç”¨æˆ·æ³¨å†Œ</router-link></li>

                <!-- æŒ‡å®šä¸€ä¸ªtagå±æ€§ï¼Œå°†æ¥åœ¨å®é™…æ¸²æŸ“çš„æ—¶å€™å°±ä¼šæ¸²æŸ“æˆli  -->
                <!-- <router-link to="/user/login" tag="li">ç”¨æˆ·æ³¨å†Œ</router-link>
                <router-link to="/user/regist" tag="li">ç”¨æˆ·ç™»é™†</router-link> -->
            </ul>
            <!-- å­è·¯ç”±çš„å†…å®¹æ˜¾ç¤ºçš„ä½ç½® -->
            <router-view></router-view>
        </div>
    </template>
    <script type="text/javascript" src="../src/vue.js" ></script>
    <script type="text/javascript" src="../src/vue-router.js"></script>
    <script type="text/javascript">
        // 1. å®šä¹‰ç»„ä»¶
        let home = {
            template:'<h2>æˆ‘æ˜¯ä¸»é¡µ</h2>'
        };
        let user = {
            template:'#user'
        };
        // a. å­è·¯ç”±å¯¹åº”çš„å†…å®¹æ¨¡æ¿
        let login = {
            // å¦‚æœæ˜¯ç¬¬ä¸€ç§æ–¹å¼è·å–å‚æ•°ï¼Œé€šè¿‡$route.query
            template:'<h2>ç”¨æˆ·ç™»å½•ï¼Œ è·å–å‚æ•°{{$route.query}} {{$route.path}}</h2>'
        };
        let regist = {
            // å¦‚æœè¯´æ˜¯ç¬¬äºŒç§æ–¹å¼ é€šè¿‡ $route.params
            template:'<h2>ç”¨æˆ·æ³¨å†Œ è·å–å‚æ•°2 {{$route.params}} {{$route.path}}</h2>'
        };
        // 2.é…ç½®è·¯ç”±
        let routes = [
            {
                path:'/main',
                component:home
            },
            {
                path:'/user',
                component:user,
                // b. åœ¨è·¯ç”±'/user'ä¸‹é…ç½®å­è·¯ç”±,ä¸€ä¸ªè·¯ç”±ä¸‹å¯èƒ½æœ‰å¤šä¸ªå­è·¯ç”±ï¼Œæ‰€ä»¥childrenæ˜¯ä¸€ä¸ªæ•°ç»„
                children:[
                    {
                        path:'login',
                        component:login
                    },
                    {
                        // éœ€è¦æŒ‡å®šä¸Šé¢çš„ä¸¤ä¸ªå‚æ•°åˆ†åˆ«ä»£è¡¨ä»€ä¹ˆæ„æ€
                        path:'regist/:name/:id',
                        component:regist
                    },
                ]
            },
            { path: '*', redirect: '/main'} // è·¯ç”±é‡å®šå‘,é»˜è®¤æ˜¾ç¤º/mainï¼Œè¿æ¥åˆ°çš„å†…å®¹
        ];
        // 3.åˆ›å»ºè·¯ç”±å®ä¾‹ï¼›
        const router2 = new VueRouter({
            routes: routes,
            // mode:'history', // å®šä¹‰è·¯ç”±æ¨¡å¼,é»˜è®¤æ˜¯hash;
            linkActiveClass:'active' // å®šä¹‰è¿æ¥æ¿€æ´»æ—¶å€™çš„æ ·å¼ç±»
        });
        // 4.åˆ›å»ºæ ¹å®ä¾‹ï¼Œå¹¶å°†è·¯ç”±å®ä¾‹æŒ‚è½½åˆ°Vueå®ä¾‹ä¸Š
        let app = new Vue({
            el:'#container',
            data:{
                book:'æ€»è¦ä¹ æƒ¯ä¸€ä¸ªäºº'
            },
            methods: {
                'change':function(){
                    console.log(this.book);
                },
                // æ·»åŠ è·¯ç”±ï¼ˆåˆ‡æ¢è·¯ç”±ï¼‰
                'addRouter':function(){
                    // è·¯ç”±å®ä¾‹.push
                    router2.push({path:'/main'}); // å…¶å®å°±æ˜¯åˆ‡æ¢è·¯ç”±ï¼Œè¿™é‡Œå°±æ˜¯å°†è·¯ç”±åˆ‡æ¢åˆ°è·¯ç”±`/main`ï¼Œæ•ˆæœå’Œç‚¹å‡»ä¸€ä¸‹`ä¸»é¡µ`ä½œç”¨æ˜¯ä¸€æ ·çš„
                },
                // æ›¿æ¢è·¯ç”±
                'changeRouter':function(){
                    // è·¯ç”±å®ä¾‹.replace()
                    router2.replace({path:'/user'}); // æ•ˆæœæ˜¯ç›´æ¥è·³è½¬åˆ°äº†`/user`çš„è·¯ç”±ï¼Œå’Œç›´æ¥ç‚¹å‡»è·¯ç”±`/user`ç›¸æ¯”ï¼Œè¿™æ ·åšæ²¡æœ‰å†å²è®°å½•ï¼ˆä¸èƒ½å›é€€ï¼‰
                }
            },
            router:router2 // æ³¨å…¥è·¯ç”±
        });
    </script>
</body>
</html>
